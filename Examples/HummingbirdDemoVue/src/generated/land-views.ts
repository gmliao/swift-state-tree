// AUTOGENERATED BY sdk/ts-codegen/src/gen-schema.ts - DO NOT EDIT.
/* eslint-disable */

import { AddGoldAction, ChatEvent, ChatMessageEvent, DemoGameState, GetMyPrivateStateAction, PingEvent, PongEvent, StateDiff, UpdateScoreAction, UpdateSettingsAction } from "./schema-types";
import { LandViewRuntime, JoinOptions } from "@sdk-runtime/LandViewRuntime";
import { LAND_ID } from "./land-constants";

type DemoGameLandViewActions = {
    addGold: AddGoldAction;
    getMyPrivateState: GetMyPrivateStateAction;
    updateScore: UpdateScoreAction;
    updateSettings: UpdateSettingsAction;
};

type DemoGameLandViewClientEvents = {
    chat: ChatEvent;
    ping: PingEvent;
};

type DemoGameLandViewServerEvents = {
    chatMessage: ChatMessageEvent;
    pong: PongEvent;
};

const demoGameLandViewWireIds = {
    actions: {
        addGold: "AddGold",
        getMyPrivateState: "GetMyPrivateState",
        updateScore: "UpdateScore",
        updateSettings: "UpdateSettings",
    },
    clientEvents: {
        chat: "Chat",
        ping: "Ping",
    },
    serverEvents: {
        chatMessage: "ChatMessage",
        pong: "Pong",
    },
} as const;

export class DemoGameLandView {
    private readonly base: LandViewRuntime<
        LAND_ID,
        keyof DemoGameLandViewActions & string,
        keyof DemoGameLandViewClientEvents & string,
        keyof DemoGameLandViewServerEvents & string,
        DemoGameState,
        StateDiff,
        DemoGameLandViewActions,
        DemoGameLandViewClientEvents,
        DemoGameLandViewServerEvents
    >;

    constructor(
        ws: WebSocket,
        landId: LAND_ID = "demo-game",
        logger?: (msg: string, meta?: unknown) => void
    ) {
        this.base = new LandViewRuntime({
            landId,
            ws,
            wireIds: demoGameLandViewWireIds,
            logger,
        });
    }

    dispose() {
        this.base.dispose();
    }

    readonly join = (options?: JoinOptions) => this.base.join(options);
    readonly leave = () => this.base.leave();

    readonly actions = {
        addGold: (payload: AddGoldAction) => this.base.sendAction("addGold", payload),
        getMyPrivateState: (payload: GetMyPrivateStateAction) => this.base.sendAction("getMyPrivateState", payload),
        updateScore: (payload: UpdateScoreAction) => this.base.sendAction("updateScore", payload),
        updateSettings: (payload: UpdateSettingsAction) => this.base.sendAction("updateSettings", payload),
    };

    readonly clientEvents = {
        chat: (payload: ChatEvent) => this.base.sendClientEvent("chat", payload),
        ping: (payload: PingEvent) => this.base.sendClientEvent("ping", payload),
    };

    readonly serverEvents = {
        onChatMessage: (handler: (payload: ChatMessageEvent) => void) => this.base.onServerEvent("chatMessage", handler),
        onPong: (handler: (payload: PongEvent) => void) => this.base.onServerEvent("pong", handler),
    };

    readonly state = {
        onSnapshot: (handler: (s: DemoGameState) => void) => this.base.onSnapshot(handler),
        onDiff: (handler: (d: StateDiff) => void) => this.base.onDiff(handler),
        getLatest: (): DemoGameState | null => this.base.latestSnapshot,
    };
}
